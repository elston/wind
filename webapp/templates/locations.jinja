<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1>Locations</h1>

            <div ng-controller="LocationsCtrl">
                <div id="locations-grid" ui-grid="gridOptions" ui-grid-selection class="grid"></div>
                <div ng-if='noLocations'>
                    <h3 align="center">No data. Use "hamburger" menu at top right corner to add location.</h3>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
{% raw %}  <!-- Angular templating -->
<div class="modal fade" id="new-location-dialog" tabindex="-1" role="dialog"
     aria-labelledby="new-location-dialog-label" ng-controller="NewLocationCtrl">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="new-location-dialog-label">Add new location</h4>
            </div>

            <div class="modal-body">
                <div class="container-fluid">
                    <form class="form-horizontal" id="new-location-form">
                        <input type="hidden" id="location-id" name="location-id">

                        <div class="form-group">
                            <label for="location-name" class="col-xs-3 control-label">Name: </label>

                            <div class="col-xs-9">
                                <input type="text" ng-model="name" id="location-name" name="location-name" class="form-control"/>
                            </div>
                        </div>

                        <div class="panel panel-default">
                            <div class="panel-heading">Search</div>
                            <div class="panel-body">
                                <p>Enter something identifying the location. Examples:
                                    Deutschland, DÃ¼sseldorf (country and city),
                                    CA, Los Angeles (USA state and city),
                                    44.590278, 28.565278 (latitude and longitude),
                                    autoip (guess from your IP).
                                </p>

                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search for..."
                                           ng-model="query" ng-keyup="$event.keyCode == 13 ? search() : null">
                                      <span class="input-group-btn">
                                        <button class="btn btn-primary" type="button" ng-click="search()">Search
                                        </button>
                                      </span>
                                </div>
                                <div ng-if='manyLocations'>
                                    <div id="select-location-grid" ui-grid="gridOptions" ui-grid-selection class="grid"></div>
                                </div>
                                <div ng-if='oneLocation'>
                                    <dl class="dl-horizontal">
                                        <dt>Country</dt>
                                        <dd>{{ location.country_name }}</dd>
                                        <dt>City</dt>
                                        <dd>{{ location.city }}</dd>
                                        <dt>Latitude</dt>
                                        <dd>{{ location.lat }}</dd>
                                        <dt>Longitude</dt>
                                        <dd>{{ location.lon }}</dd>
                                    </dl>
                                </div>
                                <div ng-if='notFound'>
                                    <p class="bg-warning">{{ notFound.description }}</p>
                                </div>

                            </div>
                        </div>

                        <div class="form-group">
                            <label for="location-lookback" class="col-xs-2 control-label">Look back: </label>

                            <div class="col-xs-4">
                                <input type="number" id="location-lookback" name="location-lookback"
                                       ng-model="lookback"
                                       class="form-control"/>
                            </div>
                            <label for="location-lookforward" class="col-xs-2 control-label">Look forward: </label>

                            <div class="col-xs-4">
                                <input type="number" id="location-lookforward" name="location-lookforward"
                                       ng-model="lookforward"
                                       class="form-control"/>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" id="new-location" class="btn btn-primary"
                        ng-class="{disabled: !oneLocation}" ng-click="addLocation()">Add</button>
            </div>
        </div>
    </div>
</div>
{% endraw %}
